import{c as W,j as e,B as a,A as Se,r,x as L,y as Ce,U as ke,z as $,G as U,H as V,w as x,C as n,a as o,e as m,g as i,f as p,b as D,I as Te,J as Ie}from"./index-DHJcnwVm.js";import{T as _e,a as De,b as y,c as v}from"./tabs-DAH6_cvR.js";import{L as d,I as c}from"./label-cJvqmhJU.js";import{S as Oe,b as Ae,c as Be,d as Fe,e as ie}from"./select-dgI4OX1_.js";import{S as Q}from"./switch-DSknOVd-.js";import{T as ce}from"./textarea-CM2XMqG8.js";import{C as He,g as Pe}from"./pdfGenerator-BxhDX3hB.js";import{E as Je}from"./eye-GFayayEz.js";import{T as O}from"./ticket-ysW3SwRn.js";import{C as G}from"./calendar-Dq9ImES4.js";import{S as ze}from"./shield-Dqm_Es94.js";import{M as Ee}from"./map-pin-Kfl0L78Q.js";import{Q as Me}from"./qr-code-BbQ7Vz_u.js";import{D as Re}from"./download-ROnyw_c1.js";import{T as Le}from"./trending-up-DlicuGfj.js";import"./security-CQiw_mJQ.js";/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $e=[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],Ue=W("settings",$e);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ve=[["path",{d:"M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8",key:"1b2hhj"}],["polyline",{points:"16 6 12 2 8 6",key:"m901s6"}],["line",{x1:"12",x2:"12",y1:"2",y2:"15",key:"1p0rca"}]],Qe=W("share",Ve);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ge=[["path",{d:"M6 9H4.5a2.5 2.5 0 0 1 0-5H6",key:"17hqa7"}],["path",{d:"M18 9h1.5a2.5 2.5 0 0 0 0-5H18",key:"lmptdp"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22",key:"1nw9bq"}],["path",{d:"M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22",key:"1np0yb"}],["path",{d:"M18 2H6v7a6 6 0 0 0 12 0V2Z",key:"u46fv3"}]],q=W("trophy",Ge);function qe({onBack:u,label:S="Back",className:A}){const j=()=>{try{if(u)return u();if(typeof window<"u"&&window.history&&window.history.length>1){window.history.back();return}window.location.href="/"}catch{}};return e.jsx("div",{className:A,children:e.jsxs(a,{variant:"ghost",size:"sm",onClick:j,className:"flex items-center space-x-2",children:[e.jsx(Se,{className:"h-4 w-4"}),e.jsx("span",{children:S})]})})}const b=[{id:1,eventTitle:"Tech Conference 2024",date:"2024-03-15",time:"09:00 AM",venue:"Convention Center, SF",ticketType:"VIP Access",price:150,status:"confirmed",qrCode:"QR123456",transferable:!0,seatNumber:"A-12",eventImage:"/api/placeholder/300/200",organizer:"TechEvents Inc",transactionHash:"0x742d35Dabc..."},{id:2,eventTitle:"Music Festival Summer",date:"2024-06-20",time:"12:00 PM",venue:"Golden Gate Park",ticketType:"General Admission",price:120,status:"confirmed",qrCode:"QR789012",transferable:!0,seatNumber:"GA",eventImage:"/api/placeholder/300/200",organizer:"Summer Sounds",transactionHash:"0x8f3e91Bc..."},{id:3,eventTitle:"Startup Pitch Night",date:"2024-02-28",time:"06:00 PM",venue:"WeWork Downtown",ticketType:"Standard",price:30,status:"attended",qrCode:"QR345678",transferable:!1,seatNumber:"B-8",eventImage:"/api/placeholder/300/200",organizer:"Startup Hub",transactionHash:"0x1a2b78Ef..."}],w=[{id:1,eventTitle:"Startup Pitch Night",date:"2024-02-28",badgeImage:"/api/placeholder/100/100",rarity:"Common",description:"Attended the monthly startup pitch event"},{id:2,eventTitle:"Web3 Workshop",date:"2024-01-15",badgeImage:"/api/placeholder/100/100",rarity:"Rare",description:"Completed the hands-on blockchain development workshop"}];function gs({onPurchaseTicket:u,onSetDisplayName:S,onBack:A,displayName:j}){const B=b.filter(s=>s.status==="confirmed"),de=b.filter(s=>s.status==="attended"),[g,F]=r.useState(""),[We,Ye]=r.useState(!1),[C,H]=r.useState(null),[Ze,oe]=r.useState(!1),[Ke,Xe]=r.useState(!1),[me,xe]=r.useState(!0),[he,P]=r.useState(!1),[k,T]=r.useState("pre"),[J,Y]=r.useState(""),[pe,Z]=r.useState([]),[z,K]=r.useState([]),[E,X]=r.useState(""),[I,ee]=r.useState(void 0),[se,te]=r.useState([]),[M,ae]=r.useState(""),[ue,R]=r.useState(!1),[re,le]=r.useState(0),[ne,ge]=r.useState(10);r.useEffect(()=>{try{const s=localStorage.getItem("gp_display_name");s&&F(s)}catch(s){console.error("Failed to load display name:",s)}},[]),r.useEffect(()=>{j&&F(j)},[j]),r.useEffect(()=>{try{const s=JSON.parse(localStorage.getItem("gatepass_help_tickets")||"[]");Z(Array.isArray(s)?s:[])}catch{}try{const s=JSON.parse(localStorage.getItem("gatepass_feed_posts")||"[]");K(Array.isArray(s)?s:[])}catch{}try{const s=JSON.parse(localStorage.getItem("gatepass_friends_attending")||"[]");te(Array.isArray(s)?s:[])}catch{}},[]);const fe=s=>{H(s),oe(!0)},je=s=>{H(s),P(!0),T("pre"),Y("")},Ne=()=>{if(!C||!J.trim())return;const t=[{id:`help-${Date.now()}`,eventTitle:C.eventTitle,category:k,message:J.trim(),status:"pending",createdAt:new Date().toISOString()},...pe];Z(t);try{localStorage.setItem("gatepass_help_tickets",JSON.stringify(t))}catch{}P(!1),x.success("Help request submitted")},ye=s=>{const t=String(s.ticketType||"").toLowerCase();return t.includes("vip")?"from-amber-300/25 to-amber-600/20":t.includes("backstage")?"from-fuchsia-400/20 to-violet-600/20":t.includes("collector")?"from-indigo-400/20 to-blue-600/20":"from-primary/20 to-secondary/20"},ve=s=>{try{const t=new Date(s.date),l=new Date,h=t.getTime()-l.getTime();if(h<=0)return"Live";const f=Math.floor(h/(1e3*60*60*24)),_=Math.floor(h/(1e3*60*60)%24);return`${f}d ${_}h`}catch{return""}},be=async s=>{try{const t={eventId:String(s.id??s.eventTitle??"event"),attendeeId:"dashboard-attendee",ticketType:s.ticketType??"General Admission",event:{name:s.eventTitle,dateISO:s.date,time:s.time,venue:s.venue,bannerUrl:void 0},attendee:{name:g||"Attendee"},purchaseTimestamp:Date.now(),blockchain:{chain:"polygon",txHash:s.transactionHash},secretSalt:"dashboard-salt"},{ticketId:l,pdfBytes:h}=await Pe(t),f=new Blob([new Uint8Array(h)],{type:"application/pdf"}),_=URL.createObjectURL(f),N=document.createElement("a");N.href=_,N.download=`GatePass_Ticket_${l}.pdf`,document.body.appendChild(N),N.click(),N.remove(),URL.revokeObjectURL(_),x.success("Download started")}catch(t){console.error("Download failed",t),x.error("Failed to download ticket")}},we=async s=>{window.prompt("Enter recipient wallet address to transfer this ticket:")&&x("Transfer request submitted (placeholder)")};return e.jsx("div",{className:"min-h-screen bg-background p-4 sm:p-6",children:e.jsxs("div",{className:"max-w-[1400px] mx-auto",children:[e.jsx(qe,{onBack:A}),e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4 mb-6 sm:mb-8",children:[e.jsxs("div",{className:"w-full sm:w-auto",children:[e.jsxs("div",{className:"flex items-center justify-between sm:justify-start gap-4 mb-1",children:[e.jsx("h1",{className:"text-2xl sm:text-3xl font-bold",children:"My Tickets"}),e.jsxs(L,{children:[e.jsx(Ce,{asChild:!0,children:e.jsxs(a,{variant:"ghost",size:"sm",className:"flex items-center space-x-2",children:[e.jsx(ke,{className:"h-4 w-4"}),e.jsx(Ue,{className:"h-4 w-4"})]})}),e.jsxs($,{children:[e.jsx(U,{children:e.jsx(V,{children:"Profile Settings"})}),e.jsxs("div",{className:"space-y-4 py-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(d,{htmlFor:"name",children:"Display Name"}),e.jsx(c,{id:"name",value:g,onChange:s=>F(s.target.value),placeholder:"Enter your display name"})]}),e.jsx(a,{onClick:()=>{try{localStorage.setItem("gp_display_name",g),S&&S(g),x.success("Display name saved")}catch(s){console.error("Failed to save display name",s),x.error("Failed to save display name")}},className:"w-full",children:"Save Changes"})]})]})]})]}),e.jsx("p",{className:"text-muted-foreground",children:"Manage your event tickets and badges"})]}),e.jsxs(a,{onClick:()=>u("browse"),className:"w-full sm:w-auto flex items-center space-x-2",children:[e.jsx(Je,{className:"h-4 w-4"}),e.jsx("span",{children:"Browse Events"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 sm:gap-6 mb-6 sm:mb-8",children:[e.jsxs(n,{children:[e.jsxs(o,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(m,{className:"text-sm font-medium",children:"Active Tickets"}),e.jsx(O,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(i,{children:[e.jsx("div",{className:"text-2xl font-bold",children:B.length}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Upcoming events"})]})]}),e.jsxs(n,{children:[e.jsxs(o,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(m,{className:"text-sm font-medium",children:"Events Attended"}),e.jsx(G,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(i,{children:[e.jsx("div",{className:"text-2xl font-bold",children:de.length}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Past events"})]})]}),e.jsxs(n,{children:[e.jsxs(o,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(m,{className:"text-sm font-medium",children:"POA Badges"}),e.jsx(q,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(i,{children:[e.jsx("div",{className:"text-2xl font-bold",children:w.length}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Collected badges"})]})]}),e.jsxs(n,{children:[e.jsxs(o,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(m,{className:"text-sm font-medium",children:"Total Spent"}),e.jsx(ze,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(i,{children:[e.jsxs("div",{className:"text-2xl font-bold",children:["$",b.reduce((s,t)=>s+t.price,0)]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"All time"})]})]})]}),e.jsxs(_e,{defaultValue:"tickets",className:"w-full",children:[e.jsx("div",{className:"border-b mb-4",children:e.jsxs(De,{className:"w-full sm:w-auto flex",children:[e.jsx(y,{value:"tickets",className:"flex-1 sm:flex-none",children:"My Tickets"}),e.jsx(y,{value:"badges",className:"flex-1 sm:flex-none",children:"POA Badges"}),e.jsx(y,{value:"history",className:"flex-1 sm:flex-none",children:"History"}),e.jsx(y,{value:"gigs",className:"flex-1 sm:flex-none",children:"Gigs"}),e.jsx(y,{value:"community",className:"flex-1 sm:flex-none",children:"Community"})]})}),e.jsxs(v,{value:"tickets",className:"space-y-6",children:[e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-4 sm:gap-6",children:b.filter(s=>s.status==="confirmed").map(s=>e.jsxs(n,{className:"flex flex-col",children:[e.jsxs("div",{className:`aspect-video bg-gradient-to-br ${ye(s)} relative overflow-hidden`,children:[e.jsx("div",{className:"absolute inset-0 opacity-20",style:{backgroundImage:"linear-gradient(120deg, rgba(255,255,255,0.0) 0%, rgba(255,255,255,0.6) 20%, rgba(255,255,255,0.0) 40%)",backgroundSize:"200% 100%",animation:"shine 6s linear infinite"}}),e.jsx("style",{children:"@keyframes shine { 0%{background-position:-200% 0} 100%{background-position:200% 0} }"}),e.jsx(O,{className:"absolute left-4 top-4 h-10 w-10 text-white/50"}),e.jsx("div",{className:"absolute right-3 top-3 text-xs bg-black/30 text-white px-2 py-1 rounded",children:ve(s)}),e.jsxs("div",{className:"absolute bottom-3 right-3 bg-black/20 backdrop-blur-sm px-2 py-1 rounded text-[10px] text-white",children:["#",s.id]}),e.jsx("a",{href:`https://www.google.com/maps/search/?q=${encodeURIComponent(s.venue)}`,target:"_blank",rel:"noreferrer",className:"absolute bottom-3 left-3 bg-black/30 text-white text-[11px] px-2 py-1 rounded",children:"Map"})]}),e.jsx(o,{className:"flex-none pb-3",children:e.jsxs("div",{className:"flex justify-between items-start gap-4",children:[e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx(m,{className:"text-lg truncate",children:s.eventTitle}),e.jsx(p,{className:"truncate",children:s.organizer})]}),e.jsx(D,{variant:"outline",className:"flex-none",children:s.ticketType})]})}),e.jsxs(i,{className:"space-y-4 flex-1",children:[e.jsxs("div",{className:"grid gap-2 text-sm",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(G,{className:"h-4 w-4 flex-none text-muted-foreground"}),e.jsx("span",{className:"truncate",children:s.date})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(He,{className:"h-4 w-4 flex-none text-muted-foreground"}),e.jsx("span",{className:"truncate",children:s.time})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ee,{className:"h-4 w-4 flex-none text-muted-foreground"}),e.jsx("span",{className:"truncate",children:s.venue})]})]}),e.jsxs("div",{className:"flex justify-between items-center py-3 border-y",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Seat"}),e.jsx("p",{className:"font-medium",children:s.seatNumber})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Price"}),e.jsxs("p",{className:"font-medium",children:["$",s.price]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-5 gap-2",children:[e.jsxs(a,{variant:"outline",size:"sm",className:"w-full flex items-center justify-center space-x-1",onClick:()=>fe(s),children:[e.jsx(Me,{className:"h-3 w-3"}),e.jsx("span",{children:"QR Code"})]}),e.jsxs(a,{variant:"outline",size:"sm",className:"w-full flex items-center justify-center space-x-1",onClick:()=>be(s),children:[e.jsx(Re,{className:"h-3 w-3"}),e.jsx("span",{children:"Download"})]}),s.transferable&&e.jsxs(a,{variant:"outline",size:"sm",className:"w-full flex items-center justify-center space-x-1",onClick:()=>we(),children:[e.jsx(Qe,{className:"h-3 w-3"}),e.jsx("span",{children:"Transfer"})]}),e.jsxs(a,{variant:"outline",size:"sm",className:"w-full flex items-center justify-center space-x-1",onClick:()=>{H(s),le(s.price),R(!0)},children:[e.jsx(Le,{className:"h-3 w-3"}),e.jsx("span",{children:"Resale"})]}),e.jsx(a,{variant:"outline",size:"sm",className:"w-full flex items-center justify-center",onClick:()=>je(s),children:"Need Help?"})]}),e.jsxs("div",{className:"flex items-center justify-end mt-2 gap-2",children:[e.jsx(Q,{checked:me,onCheckedChange:xe}),e.jsx("span",{className:"text-xs text-muted-foreground",children:"Blur sensitive details for sharing"})]}),e.jsx("div",{className:"text-xs text-muted-foreground break-words",children:e.jsxs("p",{children:["Transaction: ",s.transactionHash]})})]})]},s.id))}),B.length===0&&e.jsx(n,{children:e.jsxs(i,{className:"flex flex-col items-center justify-center py-12",children:[e.jsx(O,{className:"h-16 w-16 text-muted-foreground mb-4"}),e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"No Active Tickets"}),e.jsx("p",{className:"text-muted-foreground mb-4 text-center",children:"You don't have any upcoming events. Browse events to find something interesting!"}),e.jsx(a,{onClick:()=>u("browse"),children:"Browse Events"})]})})]}),e.jsxs(v,{value:"gigs",className:"space-y-6",children:[e.jsxs(n,{children:[e.jsxs(o,{children:[e.jsx(m,{children:"GatePass Gigs — Work Any Event"}),e.jsx(p,{children:"Build your profile and apply to gigs"})]}),e.jsx(i,{className:"space-y-4",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(d,{children:"Skills"}),e.jsx(c,{placeholder:"Security, photography, stage crew",onBlur:s=>{const t={skills:s.target.value.split(",").map(l=>l.trim()).filter(Boolean)};try{localStorage.setItem("gatepass_profile",JSON.stringify(t))}catch{}}}),e.jsx(d,{children:"Certifications"}),e.jsxs("div",{className:"border-2 border-dashed border-border rounded-lg p-4 text-center",children:[e.jsx("input",{id:"cert-upload",type:"file",multiple:!0,className:"hidden"}),e.jsx("label",{htmlFor:"cert-upload",children:e.jsx(a,{variant:"outline",size:"sm",children:"Upload Licenses"})})]}),e.jsx(d,{children:"Portfolio"}),e.jsx(ce,{placeholder:"Describe past event work",onBlur:s=>{try{const t=JSON.parse(localStorage.getItem("gatepass_profile")||"{}");t.portfolio=s.target.value,localStorage.setItem("gatepass_profile",JSON.stringify(t))}catch{}}}),e.jsx(d,{children:"Hourly Rate"}),e.jsx(c,{type:"number",placeholder:"$25",onBlur:s=>{try{const t=JSON.parse(localStorage.getItem("gatepass_profile")||"{}");t.rate=s.target.value,localStorage.setItem("gatepass_profile",JSON.stringify(t))}catch{}}}),e.jsx(d,{children:"ID Document"}),e.jsx(c,{type:"file"}),e.jsx(d,{children:"Selfie"}),e.jsx(c,{type:"file",accept:"image/*"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Q,{onCheckedChange:s=>{try{const t=JSON.parse(localStorage.getItem("gatepass_profile")||"{}");t.verified=!!s,localStorage.setItem("gatepass_profile",JSON.stringify(t))}catch{}}}),e.jsx("span",{className:"text-sm",children:"Background Checked"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(d,{children:"Availability"}),e.jsx(G,{mode:"single",className:"rounded-md border"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Q,{defaultChecked:!0}),e.jsx("span",{className:"text-sm",children:"Instant Match enabled"})]})]})]})})]}),e.jsxs(n,{children:[e.jsxs(o,{children:[e.jsx(m,{children:"Job Board"}),e.jsx(p,{children:"Filter by event type, location, date, pay range"})]}),e.jsxs(i,{className:"space-y-3",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-3",children:[e.jsx(c,{placeholder:"Event type",id:"gig-type"}),e.jsx(c,{placeholder:"Location",id:"gig-location"}),e.jsx(c,{placeholder:"Date",id:"gig-date"}),e.jsx(c,{placeholder:"Min pay",id:"gig-pay"})]}),e.jsxs("div",{className:"space-y-2",children:[(()=>{try{return JSON.parse(localStorage.getItem("gatepass_gigs")||"[]")}catch{return[]}})().map(s=>e.jsxs("div",{className:"border rounded-lg p-3 flex items-center justify-between",children:[e.jsxs("div",{className:"min-w-0",children:[e.jsxs("p",{className:"font-medium truncate",children:[s.role," • ",s.event]}),e.jsxs("p",{className:"text-sm text-muted-foreground truncate",children:[s.location," • ",s.date," • $",s.pay,"/hr"]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(a,{size:"sm",onClick:()=>{try{const t=JSON.parse(localStorage.getItem("gatepass_applications")||"[]");t.unshift({id:`app-${Date.now()}`,gigId:s.id,status:"applied"}),localStorage.setItem("gatepass_applications",JSON.stringify(t)),x.success("Quick applied")}catch{}},children:"Quick Apply"}),e.jsx(a,{size:"sm",variant:"outline",children:"Details"})]})]},s.id)),(()=>{try{return JSON.parse(localStorage.getItem("gatepass_gigs")||"[]").length===0}catch{return!0}})()&&e.jsx("p",{className:"text-sm text-muted-foreground",children:"No gigs posted yet"})]})]})]})]}),e.jsxs(v,{value:"community",className:"space-y-6",children:[e.jsxs(n,{children:[e.jsxs(o,{children:[e.jsx(m,{children:"Event Feed"}),e.jsx(p,{children:"Organizer updates and attendee stories"})]}),e.jsx(i,{className:"space-y-4",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(d,{children:"Post Text"}),e.jsx(c,{value:E,onChange:s=>X(s.target.value),placeholder:"Share an update..."}),e.jsxs("div",{className:"border-2 border-dashed border-border rounded-lg p-4 text-center",children:[I?e.jsx("img",{src:I,alt:"Post",className:"max-h-40 mx-auto rounded"}):null,e.jsx("input",{id:"feed-image",type:"file",accept:"image/*",className:"hidden",onChange:s=>{const t=s.target.files?.[0];if(!t)return;const l=new FileReader;l.onload=()=>ee(String(l.result)),l.readAsDataURL(t)}}),e.jsx("label",{htmlFor:"feed-image",children:e.jsx(a,{asChild:!0,variant:"outline",size:"sm",children:e.jsx("span",{children:"Upload Image"})})})]}),e.jsx(a,{onClick:()=>{if(!E.trim()&&!I)return;const t=[{id:`post-${Date.now()}`,text:E.trim(),image:I,author:g||"Attendee",createdAt:new Date().toISOString()},...z];K(t);try{localStorage.setItem("gatepass_feed_posts",JSON.stringify(t))}catch{}X(""),ee(void 0)},children:"Post"})]}),e.jsxs("div",{className:"space-y-3",children:[z.length===0&&e.jsx("p",{className:"text-sm text-muted-foreground",children:"No posts yet"}),z.map(s=>e.jsxs("div",{className:"border rounded-lg p-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("p",{className:"font-medium",children:s.author}),e.jsx("span",{className:"text-xs text-muted-foreground",children:new Date(s.createdAt).toLocaleString()})]}),s.text&&e.jsx("p",{className:"text-sm mt-1",children:s.text}),s.image&&e.jsx("img",{src:s.image,alt:"Post",className:"mt-2 rounded"})]},s.id))]})]})})]}),e.jsxs(n,{children:[e.jsxs(o,{children:[e.jsx(m,{children:"Attendee Chat"}),e.jsx(p,{children:"Connect before and during the event"})]}),e.jsxs(i,{className:"space-y-3",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-2",children:[e.jsx(c,{id:"chat-msg",placeholder:"Say hi..."}),e.jsx(a,{onClick:()=>{const s=document.getElementById("chat-msg"),t=(s?.value||"").trim();if(t)try{const l=JSON.parse(localStorage.getItem("gatepass_chat_messages")||"[]");l.unshift({id:`msg-${Date.now()}`,author:g||"Attendee",text:t,at:new Date().toISOString()}),localStorage.setItem("gatepass_chat_messages",JSON.stringify(l)),s.value=""}catch{}},children:"Send"})]}),e.jsxs("div",{className:"space-y-2",children:[(()=>{try{return JSON.parse(localStorage.getItem("gatepass_chat_messages")||"[]")}catch{return[]}})().map(s=>e.jsxs("div",{className:"border rounded-lg p-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("p",{className:"font-medium",children:s.author}),e.jsx("span",{className:"text-xs text-muted-foreground",children:new Date(s.at).toLocaleTimeString()})]}),e.jsx("p",{className:"text-sm mt-1 break-words",children:s.text})]},s.id)),(()=>{try{return JSON.parse(localStorage.getItem("gatepass_chat_messages")||"[]").length===0}catch{return!0}})()&&e.jsx("p",{className:"text-sm text-muted-foreground",children:"No messages yet"})]})]})]}),e.jsxs(n,{children:[e.jsxs(o,{children:[e.jsx(m,{children:"Friends Attending"}),e.jsx(p,{children:"Invite friends and see who’s going"})]}),e.jsxs(i,{className:"space-y-3",children:[e.jsxs("div",{className:"flex gap-2",children:[e.jsx(c,{placeholder:"Friend name",value:M,onChange:s=>ae(s.target.value)}),e.jsx(a,{onClick:()=>{if(!M.trim())return;const s=[...se,M.trim()];te(s),ae("");try{localStorage.setItem("gatepass_friends_attending",JSON.stringify(s))}catch{}},children:"Add"})]}),e.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 gap-2",children:se.map((s,t)=>e.jsx(D,{variant:"secondary",children:s},t))})]})]})]}),e.jsxs(v,{value:"badges",className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(d,{children:"Sort by"}),e.jsxs(Oe,{defaultValue:"rarity",onValueChange:s=>{const t=[...w].sort((l,h)=>{if(s==="rarity"){const f={Rare:0,Common:1};return(f[l.rarity]||9)-(f[h.rarity]||9)}return s==="date"?new Date(h.date).getTime()-new Date(l.date).getTime():0});window.__setBadges&&window.__setBadges(t)},children:[e.jsx(Ae,{className:"w-[160px]",children:e.jsx(Be,{placeholder:"rarity"})}),e.jsxs(Fe,{children:[e.jsx(ie,{value:"rarity",children:"Rarity"}),e.jsx(ie,{value:"date",children:"Date"})]})]})]}),e.jsxs("div",{className:"text-sm text-muted-foreground",children:["Total badges: ",w.length]})]}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4 sm:gap-6",children:w.map(s=>e.jsxs(n,{className:"flex flex-col",children:[e.jsxs(o,{className:"text-center pb-3",children:[e.jsxs("div",{className:"w-20 h-20 sm:w-24 sm:h-24 mx-auto bg-gradient-to-br from-primary/20 to-secondary/20 rounded-full flex items-center justify-center mb-4 relative overflow-hidden",children:[e.jsx(q,{className:"h-10 w-10 sm:h-12 sm:w-12 text-primary"}),s.rarity==="Rare"&&e.jsx("div",{className:"absolute inset-0",style:{backgroundImage:"linear-gradient(120deg, rgba(255,255,255,0.0) 0%, rgba(255,255,255,0.6) 20%, rgba(255,255,255,0.0) 40%)",backgroundSize:"200% 100%",animation:"shine 5s linear infinite"}}),e.jsx("style",{children:"@keyframes shine { 0%{background-position:-200% 0} 100%{background-position:200% 0} }"})]}),e.jsx(m,{className:"text-lg truncate",children:s.eventTitle}),e.jsx(p,{className:"truncate",children:s.date})]}),e.jsxs(i,{className:"text-center flex-1 flex flex-col justify-between gap-3",children:[e.jsx(D,{variant:s.rarity==="Rare"?"default":"secondary",className:"w-fit mx-auto",children:s.rarity}),e.jsx("p",{className:"text-sm text-muted-foreground",children:s.description})]})]},s.id))}),w.length===0&&e.jsx(n,{children:e.jsxs(i,{className:"flex flex-col items-center justify-center py-12",children:[e.jsx(q,{className:"h-16 w-16 text-muted-foreground mb-4"}),e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"No Badges Yet"}),e.jsx("p",{className:"text-muted-foreground mb-4 text-center",children:"Attend events to collect Proof of Attendance badges!"}),e.jsx(a,{onClick:()=>u("browse"),children:"Find Events"})]})})]}),e.jsx(v,{value:"history",className:"space-y-4",children:e.jsx("div",{className:"grid gap-4",children:b.map(s=>e.jsx(n,{children:e.jsxs(i,{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between p-4 sm:p-6 gap-4",children:[e.jsxs("div",{className:"flex items-center gap-4 min-w-0 flex-1",children:[e.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-primary/20 to-secondary/20 rounded-lg flex items-center justify-center flex-none",children:e.jsx(O,{className:"h-6 w-6 text-primary"})}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("h4",{className:"font-semibold truncate",children:s.eventTitle}),e.jsxs("p",{className:"text-sm text-muted-foreground truncate",children:[s.date," • ",s.venue]})]})]}),e.jsxs("div",{className:"flex items-center justify-between sm:flex-col sm:items-end gap-2 w-full sm:w-auto",children:[e.jsx(D,{variant:s.status==="attended"?"default":"secondary",className:"flex-none",children:s.status}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:["$",s.price]})]})]})},s.id))})})]}),e.jsx(L,{open:he,onOpenChange:P,children:e.jsxs($,{children:[e.jsx(U,{children:e.jsx(V,{children:"Need Help?"})}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex gap-2",children:[e.jsx(a,{variant:k==="pre"?"default":"outline",size:"sm",onClick:()=>T("pre"),children:"Pre-Event"}),e.jsx(a,{variant:k==="during"?"default":"outline",size:"sm",onClick:()=>T("during"),children:"During Event"}),e.jsx(a,{variant:k==="post"?"default":"outline",size:"sm",onClick:()=>T("post"),children:"Post-Event"})]}),e.jsxs("div",{children:[e.jsx(d,{children:"Describe your issue"}),e.jsx(ce,{value:J,onChange:s=>Y(s.target.value),placeholder:"How can we assist?",className:"mt-2"})]})]}),e.jsx(Te,{children:e.jsx(a,{onClick:Ne,children:"Submit"})})]})}),e.jsx(L,{open:ue,onOpenChange:R,children:e.jsxs($,{children:[e.jsxs(U,{children:[e.jsx(V,{children:"Resale Listing"}),e.jsx(Ie,{children:"Set price and fee split"})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx(d,{children:"Price"}),e.jsx(c,{type:"number",value:re,onChange:s=>le(Number(s.target.value||0))})]}),e.jsxs("div",{children:[e.jsx(d,{children:"Platform Fee (%)"}),e.jsx(c,{type:"number",value:ne,onChange:s=>ge(Number(s.target.value||0))})]}),e.jsx(a,{onClick:()=>{try{const s=JSON.parse(localStorage.getItem("gatepass_resale_listings")||"[]"),t=Array.isArray(s)?s:[];t.unshift({id:`resale-${Date.now()}`,ticketId:C?.ticketId,event:C?.eventTitle,price:re,feePct:ne}),localStorage.setItem("gatepass_resale_listings",JSON.stringify(t)),x.success("Listed for resale"),R(!1)}catch{x.error("Failed to save")}},children:"List"})]})]})})]})})}export{gs as AttendeeDashboard};
