const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index-D4m5GbFn.js","assets/index-DHJcnwVm.js","assets/index-DIdTTaAh.css","assets/browser-Cauh-RnK.js"])))=>i.map(i=>d[i]);
import{c as q,_ as I}from"./index-DHJcnwVm.js";import{g as R}from"./security-CQiw_mJQ.js";/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]],j=q("clock",B);function F(e){return Array.from(new TextEncoder().encode(e)).map(h=>h.toString(16).padStart(2,"0")).join("")}async function u(e){const h=crypto.getRandomValues(new Uint8Array(8)),C=Array.from(h).map(n=>n.toString(16).padStart(2,"0")).join(""),d=`GT-${e.eventId}-${C}`,P=`${d}|${e.eventId}|${e.attendeeId}|${e.purchaseTimestamp}|${e.secretSalt}|${e.blockchain?.txHash??""}`,m=await R(P),_=`${d}|${e.eventId}|${e.attendeeId}|${e.purchaseTimestamp}|${m}`,[{PDFDocument:S,StandardFonts:x,rgb:a},z]=await Promise.all([I(()=>import("./index-D4m5GbFn.js"),__vite__mapDeps([0,1,2])),I(()=>import("./browser-Cauh-RnK.js").then(n=>n.b),__vite__mapDeps([3,1,2]))]),r=await S.create(),o=r.addPage([600,850]),{width:i,height:c}=o.getSize(),s=await r.embedFont(x.Helvetica),g=await r.embedFont(x.HelveticaBold),y=e.theme?.bg??[.05,.05,.05],t=e.theme?.text??[.95,.95,.95],w=e.theme?.accent??[.3,.6,.95];if(o.drawRectangle({x:0,y:0,width:i,height:c,color:a(y[0],y[1],y[2])}),e.event.bannerUrl)try{const n=await fetch(e.event.bannerUrl),v=new Uint8Array(await n.arrayBuffer());let l;try{l=await r.embedPng(v)}catch{l=await r.embedJpg(v)}const f=i-80,L=f/l.width,k=l.height*L;o.drawImage(l,{x:40,y:c-60-k,width:f,height:k})}catch{}o.drawText("GatePass -IG",{x:40,y:c-40,size:18,font:g,color:a(t[0],t[1],t[2])}),o.drawText(e.event.name,{x:40,y:c-80,size:24,font:g,color:a(t[0],t[1],t[2])}),o.drawText(`${e.event.dateISO} • ${e.event.time} • ${e.event.venue}`,{x:40,y:c-110,size:12,font:s,color:a(t[0],t[1],t[2])}),o.drawText(`Attendee: ${e.attendee.name}`,{x:40,y:c-150,size:14,font:s,color:a(t[0],t[1],t[2])}),o.drawText(`Ticket Type: ${e.ticketType}`,{x:40,y:c-170,size:14,font:s,color:a(t[0],t[1],t[2])}),o.drawText(`Ticket ID: ${d}`,{x:40,y:c-190,size:14,font:s,color:a(t[0],t[1],t[2])});const b=document.createElement("canvas");await z.toCanvas(b,_,{errorCorrectionLevel:"H",width:280});const D=b.toDataURL("image/png"),H=Uint8Array.from(atob(D.split(",")[1]),n=>n.charCodeAt(0)),U=await r.embedPng(H);o.drawImage(U,{x:i-320,y:c-520,width:280,height:280}),o.drawText(m.slice(0,64),{x:i-320,y:c-225,size:6,font:s,color:a(t[0]*.8,t[1]*.8,t[2]*.8)});const A=(n=>{switch(n.toLowerCase()){case"vip":return a(.8,.7,0);case"general":return a(w[0],w[1],w[2]);case"early bird":return a(.2,.8,.4);default:return a(.4,.4,.4)}})(e.ticketType);o.drawRectangle({x:20,y:20,width:i-40,height:c-40,borderWidth:2,color:a(0,0,0),borderColor:A});const T="GatePass by IG - Lets give them access with tickets",$=9,G=s.widthOfTextAtSize(T,$);o.drawText(T,{x:Math.max(20,i-G-20),y:24,size:$,font:s,color:a(.7,.7,.7),opacity:.5}),e.blockchain?.txHash&&(o.drawText(`On-chain Tx: ${e.blockchain.txHash}`,{x:40,y:80,size:10,font:s,color:a(t[0],t[1],t[2])}),o.drawText(`Verify: https://explorer/${e.blockchain.chain??"polygon"}/tx/${e.blockchain.txHash}`,{x:40,y:65,size:10,font:s,color:a(t[0],t[1],t[2])}));const p=crypto.randomUUID();r.setTitle(`GatePass Ticket ${d}`),r.setSubject("Event Ticket"),r.setKeywords([`UUID:${p}`,`SEC:${F(m.slice(0,16))}`]),r.setProducer("GatePass -IG"),r.setCreator("GatePass Ticket Generator");const E=await r.save();return{ticketId:d,pdfBytes:E}}export{j as C,u as g};
